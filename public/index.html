<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Real-Time DEX Arbitrage Scanner</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900">
  <div class="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6">
    <div class="max-w-7xl mx-auto"><!-- Header -->
  <div class="text-center mb-8">
    <h1 class="text-4xl font-bold text-white mb-2">üîç Real-Time DEX Arbitrage Scanner</h1>
    <p class="text-gray-300">Uniswap V3 ‚Üî Paraswap V5 Arbitrage</p>
  </div>

  <!-- Network Selector -->
  <div class="mb-6 bg-slate-800 rounded-lg p-6 border border-slate-700">
    <h3 class="text-xl font-semibold text-white mb-4">Select Network</h3>
    <div class="grid grid-cols-2 md:grid-cols-3 gap-3" id="networkButtons"></div>
    <p id="networkWarning" class="text-sm text-yellow-400 mt-3 hidden">‚ö†Ô∏è Stop scanning to switch networks</p>
  </div>

  <!-- Stats -->
  <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
    <div class="bg-slate-800 rounded-lg p-4 border border-slate-700">
      <p class="text-gray-400 text-sm">Network</p>
      <p class="text-xl font-bold text-white" id="currentNetwork">Arbitrum</p>
    </div>
    <div class="bg-slate-800 rounded-lg p-4 border border-slate-700">
      <p class="text-gray-400 text-sm">Opportunities</p>
      <p class="text-2xl font-bold text-white" id="totalOpps">0</p>
    </div>
    <div class="bg-slate-800 rounded-lg p-4 border border-slate-700">
      <p class="text-gray-400 text-sm">Avg Net Profit</p>
      <p class="text-2xl font-bold text-green-400" id="avgProfit">$0.00</p>
    </div>
    <div class="bg-slate-800 rounded-lg p-4 border border-slate-700">
      <p class="text-gray-400 text-sm">Scans</p>
      <p class="text-2xl font-bold text-purple-400" id="scansCount">0</p>
    </div>
  </div>

  <!-- Control Button -->
  <div class="flex justify-center mb-6">
    <button id="scanButton" class="px-8 py-3 rounded-lg font-semibold text-white bg-green-600 hover:bg-green-700">
      ‚ñ∂Ô∏è Start Scanning
    </button>
  </div>

  <!-- Status -->
  <div id="statusMessage" class="mb-6 hidden rounded-lg p-4 border">
    <p id="statusText" class="text-center text-white"></p>
  </div>

  <!-- Opportunities -->
  <div class="bg-slate-800 rounded-lg p-6 border border-slate-700">
    <h3 class="text-xl font-semibold text-white mb-4">üìä Live Arbitrage Opportunities</h3>
    <div id="opportunitiesList" class="text-gray-400 text-center py-12">No opportunities yet</div>
  </div>

</div>

  </div><script>
let selectedNetwork = 'arbitrum';
let isScanning = false;
let scanInterval = null;
let opportunities = [];
let stats = { total: 0, scans: 0, avgProfit: 0 };

const NETWORKS = {
  arbitrum: { name: 'Arbitrum', color: 'bg-cyan-600', chainId: 42161 },
  polygon: { name: 'Polygon', color: 'bg-purple-600', chainId: 137 },
  optimism: { name: 'Optimism', color: 'bg-red-600', chainId: 10 }
};

const API = window.location.origin;

function initNetworkButtons() {
  const c = document.getElementById('networkButtons');
  Object.entries(NETWORKS).forEach(([k, n]) => {
    const b = document.createElement('button');
    b.id = `net-${k}`;
    b.className = `p-4 rounded-lg border-2 ${k===selectedNetwork ? n.color+' border-white text-white':'bg-slate-700 border-slate-600 text-gray-300'}`;
    b.innerHTML = `<div class="font-semibold">${n.name}</div><div class="text-xs">Chain ${n.chainId}</div>`;
    b.onclick = () => selectNetwork(k);
    c.appendChild(b);
  });
}

function selectNetwork(net){
  if(isScanning) return;
  selectedNetwork = net;
  document.getElementById('currentNetwork').textContent = NETWORKS[net].name;
  opportunities = [];
  stats = { total:0, scans:0, avgProfit:0 };
  updateStats();
  render();
  initNetworkButtons();
}

async function scan(){
  setStatus('Scanning blockchain‚Ä¶','blue');
  try{
    const r = await fetch(`${API}/api/scan/${selectedNetwork}`);
    const d = await r.json();
    stats.scans++;
    if(d.success && d.opportunities.length){
      d.opportunities.forEach(o=>o.id=Date.now()+Math.random());
      opportunities = [...d.opportunities, ...opportunities].slice(0,25);
      stats.total += d.opportunities.length;
      stats.avgProfit = (opportunities.reduce((a,b)=>a+parseFloat(b.netProfitUSD),0)/opportunities.length).toFixed(2);
      setStatus(`Found ${d.opportunities.length} opportunities`,'green');
    } else setStatus('No opportunities found','gray');
    updateStats();
    render();
  }catch(e){ setStatus(e.message,'red'); }
}

function updateStats(){
  document.getElementById('totalOpps').textContent = stats.total;
  document.getElementById('avgProfit').textContent = `$${stats.avgProfit}`;
  document.getElementById('scansCount').textContent = stats.scans;
}

function setStatus(t,c){
  const m=document.getElementById('statusMessage');
  m.className=`mb-6 rounded-lg p-4 border bg-${c}-800 border-${c}-700`;
  document.getElementById('statusText').textContent=t;
  m.classList.remove('hidden');
  setTimeout(()=>m.classList.add('hidden'),3000);
}

function render(){
  const c=document.getElementById('opportunitiesList');
  if(!opportunities.length){ c.innerHTML='No opportunities yet'; return; }
  c.innerHTML = opportunities.map(o=>`
    <div class="bg-slate-700 p-4 rounded-lg border border-slate-600 mb-4">
      <div class="flex justify-between">
        <div class="flex items-center gap-2">
          <img src="${o.tokenIn.icon}" class="w-6 h-6" />
          <img src="${o.tokenOut.icon}" class="w-6 h-6" />
          <span class="font-bold text-white">${o.pair}</span>
        </div>
        <div class="text-right">
          <p class="text-green-400 font-bold">+$${o.netProfitUSD}</p>
          <p class="text-xs text-gray-400">Trade $${o.tradeSizeUSD}</p>
        </div>
      </div>
      <div class="text-sm text-gray-300 mt-2">Buy: ${o.dexBuy} ‚Üí Sell: ${o.dexSell}</div>
    </div>`).join('');
}

function toggle(){
  const b=document.getElementById('scanButton');
  if(isScanning){ clearInterval(scanInterval); isScanning=false; b.textContent='‚ñ∂Ô∏è Start Scanning'; b.className='px-8 py-3 rounded-lg font-semibold text-white bg-green-600'; }
  else{ isScanning=true; b.textContent='‚è∏Ô∏è Stop Scanning'; b.className='px-8 py-3 rounded-lg font-semibold text-white bg-red-600'; scan(); scanInterval=setInterval(scan,10000); }
}

document.addEventListener('DOMContentLoaded',()=>{
  initNetworkButtons();
  document.getElementById('scanButton').onclick=toggle;
});
</script></body>
        </html>
